var vt=Object.defineProperty,ht=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var pt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable;var Ae=(e,n,o)=>n in e?vt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ne=(e,n)=>{for(var o in n||(n={}))pt.call(n,o)&&Ae(e,o,n[o]);if(Fe)for(var o of Fe(n))gt.call(n,o)&&Ae(e,o,n[o]);return e},ke=(e,n)=>ht(e,mt(n));import{ak as ae,aM as fe,p as R,aN as et,f as j,o as C,b as Y,aO as tt,U as lt,g as G,ai as N,av as nt,aw as bt,u as l,aP as ot,aQ as V,y as we,a1 as Ce,O as Ie,P as D,c as J,W as ie,d as X,ay as Me,Y as Oe,Z as at,am as de,r as le,T as ze,aR as De,K as st,aS as te,t as Ee,x as Ne,S as pe,_ as yt,an as xt,i as Ct,w as Ve,R as kt,e as Ke,aT as Mt,aD as St}from"./index-DJdcJtZF.js";import{useDict as wt}from"./hook-CEZwtMgz.js";import{R as It}from"./index-BkW6KA5X.js";import{u as Pe}from"./hooks-CEFibzIX.js";import{A as Wt,E as Ht,D as Pt}from"./add-circle-line-XF2S58mB.js";import"./dict-Ow58r0Fu.js";import"./rule-ho_r1Qqg.js";import"./index-DXF54BI9.js";import"./system-DGxW3byK.js";let oe=null;function Rt(){return oe!==null}function Ot(e){oe&&ut(),oe=e}function Ue(e){e===oe&&(oe=null)}function ut(){oe&&(oe.closeMenu(),oe=null)}const Z={defaultDirection:"br",defaultMinWidth:100,defaultMaxWidth:600,defaultZindex:100,defaultZoom:1,defaultAdjustPadding:{x:0,y:10}};function be(e,n){let o=e.offsetTop;return e.offsetParent!=null&&e.offsetParent!=n&&(o-=e.offsetParent.scrollTop,o+=be(e.offsetParent,n)),o}function ye(e,n){let o=e.offsetLeft;return e.offsetParent!=null&&e.offsetParent!=n&&(o-=e.offsetParent.scrollLeft,o+=ye(e.offsetParent,n)),o}function _t(e,n,o,i){return{x:ye(e,i)+n,y:be(e,i)+o}}const Re="mx-menu-default-container",Bt="mx-menu-container-";let Tt=0;function rt(e){const{getContainer:n,zIndex:o}=e;if(n){const h=typeof n=="function"?n():n;if(h){let t=h.getAttribute("id");return t||(t=Bt+Tt++,h.setAttribute("id",t)),{eleId:t,container:h,isNew:!1}}}let i=document.getElementById(Re);return i||(i=document.createElement("div"),i.setAttribute("id",Re),i.setAttribute("class","mx-menu-ghost-host fullscreen"),document.body.appendChild(i)),i.style.zIndex=(o==null?void 0:o.toString())||Z.defaultZindex.toString(),{eleId:Re,container:i,isNew:!0}}function Xe(e){return typeof e=="number"?`${e}px`:e}const ee=ae({props:{vnode:{type:null},data:{type:null,default:null}},setup(e){const{vnode:n,data:o}=fe(e);return()=>typeof n.value=="function"?n.value(o.value):n.value}});function Lt(e,n){const o=ne({},e);return delete o[n],o}var $t=Object.defineProperty,jt=(e,n,o)=>n in e?$t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,Ye=(e,n,o)=>jt(e,typeof n!="symbol"?n+"":n,o);class Ze{constructor(n,o){Ye(this,"x",0),Ye(this,"y",0),this.x=n||0,this.y=o||0}set(n,o){this.x=n,this.y=o}substract(n){this.x-=n.x,this.y-=n.y}}function Ge(e){const{onDown:n,onMove:o,onUp:i}=e,h=new Ze,t=new Ze;let g;function r(y){y.stopPropagation(),t.set(y.x,y.y),t.substract(h),o(h,t,y,g)}function W(y){i(y,g),h.set(0,0),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",W)}return(y,k)=>n(y,k)?(g=k,h.set(y.x,y.y),document.addEventListener("mousemove",r),document.addEventListener("mouseup",W),y.stopPropagation(),!0):!1}function Ft(e,n){let o=0;return{start(){o>0&&clearInterval(o),o=setInterval(()=>{o=0,n()},e)},stop(){o>0&&(clearInterval(o),o=0)}}}const ge=[],Je=Ft(100,()=>{for(const e of ge)e()});function At(e,n,o,i){let h=0,t=0;function g(){e.value&&(n&&h!==e.value.offsetWidth&&n(e.value.offsetWidth),o&&t!==e.value.offsetHeight&&o(e.value.offsetHeight),h=e.value.offsetWidth,t=e.value.offsetHeight)}return{startResizeChecker(){Je.start(),ge.push(g)},stopResizeChecker(){const r=ge.indexOf(g);r>=0&&ge.splice(r,1),ge.length===0&&Je.stop()}}}const Qe=140,zt=70,Dt=ae({__name:"ScrollRect",props:{scroll:{type:String,default:"both"},scrollBarAlwaysShow:{type:Boolean,default:!1},scrollBarBackgroundClickable:{type:Boolean,default:!1},height:{type:Number,default:void 0},width:{type:Number,default:void 0},maxHeight:{type:Number,default:void 0},maxWidth:{type:Number,default:void 0},containerClass:{type:String,default:""},containerStyle:{type:null}},emits:["scroll","resized"],setup(e,{expose:n,emit:o}){const i=e,h=o,t=R(),g=R(),r=R(),W=R(),y=R(),k=R(),B=R(!1),z=Ee(()=>i.scroll==="horizontal"||i.scroll==="both"),w=Ee(()=>i.scroll==="vertical"||i.scroll==="both"),x=Ne({show:!1,size:0,sizeRaw:0,pos:0}),f=Ne({show:!1,size:0,sizeRaw:0,pos:0});let c=0,v=0,M=0,H=0,T=null;const F={attributes:!0,childList:!0};function d(){if(t.value){if(x.show){const a=t.value.offsetWidth/t.value.scrollWidth;x.sizeRaw=a*t.value.offsetWidth,x.size=a*100,x.pos=t.value.scrollLeft/(t.value.scrollWidth-t.value.offsetWidth)*(100-x.size),a>=1&&(x.show=!1)}if(f.show){const a=t.value.offsetHeight/t.value.scrollHeight;f.sizeRaw=a*t.value.offsetHeight,f.size=a*100,f.pos=t.value.scrollTop/(t.value.scrollHeight-t.value.offsetHeight)*(100-f.size),a>=1&&(f.show=!1)}h("scroll",t.value.scrollLeft,t.value.scrollTop)}}function m(a=!1){if(!t.value)return;let I=z.value,L=w.value;const re=I&&(c!==t.value.scrollWidth||M!==t.value.offsetWidth),ve=w&&(v!==t.value.scrollHeight||H!==t.value.offsetHeight);if(!a&&!re&&!ve)return;const ce=window.getComputedStyle(t.value);(ce.overflow==="hidden"||ce.overflowX==="hidden")&&(I=!1),(ce.overflow==="hidden"||ce.overflowY==="hidden")&&(L=!1),x.show=I,f.show=L,d(),M=t.value.offsetWidth,H=t.value.offsetHeight,c=t.value.scrollWidth,v=t.value.scrollHeight,h("resized",c,v)}function P(a){var I;i.scroll=="horizontal"&&(a.deltaMode==0&&((I=t.value)==null||I.scrollTo({left:t.value.scrollLeft+(a.deltaY>0?Qe:-140),behavior:"smooth"})),a.preventDefault(),a.stopPropagation())}function O(a){var I;a.deltaMode==0&&((I=t.value)==null||I.scrollTo({left:t.value.scrollLeft+(a.deltaY>0?Qe:-140),behavior:"smooth"}),a.preventDefault(),a.stopPropagation())}function E(a){var I;a.deltaMode==0&&((I=t.value)==null||I.scrollTo({top:t.value.scrollTop+(a.deltaY>0?zt:-70),behavior:"smooth"}),a.preventDefault(),a.stopPropagation())}let K=0,A=0,b=0,$=0;const U=Ge({onDown(a){return!r.value||!y.value?!1:(K=a.offsetX,A=a.x-a.offsetX-y.value.offsetLeft,a.preventDefault(),B.value=!0,!0)},onMove(a,I,L){t.value&&r.value&&(s(L.x-K-A),L.preventDefault(),L.stopPropagation())},onUp(){B.value=!1}}),Q=Ge({onDown(a){return!W.value||!k.value?!1:(b=a.offsetY,$=a.y-a.offsetY-k.value.offsetTop,a.preventDefault(),B.value=!0,!0)},onMove(a,I,L){t.value&&W.value&&(p(L.y-b-$),L.preventDefault(),L.stopPropagation())},onUp(){B.value=!1}});function S(a){t.value&&(t.value.scrollLeft=a/100*(t.value.scrollWidth-t.value.offsetWidth))}function se(a){t.value&&(t.value.scrollLeft=a/100*(t.value.scrollHeight-t.value.offsetHeight))}function s(a){t.value&&(t.value.scrollLeft=a/(t.value.offsetWidth-x.sizeRaw)*(t.value.scrollWidth-t.value.offsetWidth))}function p(a){t.value&&(t.value.scrollTop=a/(t.value.offsetHeight-f.sizeRaw)*(t.value.scrollHeight-t.value.offsetHeight))}function _(a){i.scrollBarBackgroundClickable&&s(a.offsetX-x.sizeRaw/2)}function q(a){i.scrollBarBackgroundClickable&&p(a.offsetY-f.sizeRaw/2)}const{startResizeChecker:u,stopResizeChecker:ue}=At(t,()=>m(),()=>m());return we(()=>{Ce(()=>{setTimeout(()=>m(!0),200),m(!0),u(),T=new MutationObserver(()=>m()),T.observe(t.value,F)})}),Ie(()=>{ue(),T&&(T.disconnect(),T=null)}),n({refreshScrollState(){m(!0)},getScrollContainer(){return t.value},scrollTo(a,I){var L;(L=t.value)==null||L.scrollTo(a,I)},scrollToTop(){var a;(a=t.value)==null||a.scrollTo(0,0)},scrollToBottom(){var a;(a=t.value)==null||a.scrollTo(t.value.scrollWidth,t.value.scrollHeight)}}),(a,I)=>(C(),J("div",{ref_key:"scrollrect",ref:g,class:ie(["vue-scroll-rect",e.scrollBarAlwaysShow?"always-show-scrollbar":"",e.scrollBarBackgroundClickable?"background-clickable":"",B.value?"dragging":""]),style:pe({width:e.width?`${e.width}px`:void 0,height:e.height?`${e.height}px`:void 0}),onWheel:P},[X("div",{ref_key:"container",ref:t,class:ie(["scroll-content",e.scroll,e.containerClass]),style:pe(ne({maxWidth:e.maxWidth?`${e.maxWidth}px`:void 0,maxHeight:e.maxHeight?`${e.maxHeight}px`:void 0},e.containerStyle)),onScroll:d},[N(a.$slots,"default")],38),x.show?N(a.$slots,"scrollBarX",{key:0,scrollBarValue:x,onScroll:S},()=>[X("div",{ref_key:"scrollBarRefX",ref:r,class:"scrollbar horizontal",onClick:_,onWheel:O},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefX",ref:y,style:pe({left:`${x.pos}%`,width:`${x.size}%`}),onMousedown:I[0]||(I[0]=(...L)=>l(U)&&l(U)(...L)),onWheel:O},null,36)],544)]):D("",!0),f.show?N(a.$slots,"scrollBarY",{key:1,scrollBarValue:f,onScroll:se},()=>[f.show?(C(),J("div",{key:0,ref_key:"scrollBarRefY",ref:W,class:"scrollbar vertical",onClick:q,onWheel:E},[X("div",{class:"thumb",ref_key:"scrollBarThumbRefY",ref:k,style:pe({top:`${f.pos}%`,height:`${f.size}%`}),onMousedown:I[1]||(I[1]=(...L)=>l(Q)&&l(Q)(...L)),onWheel:E},null,36)],544)):D("",!0)]):D("",!0)],38))}}),_e=(e,n)=>{const o=e.__vccOpts||e;for(const[i,h]of n)o[i]=h;return o},Et={},Nt={class:"mx-checked-mark","aria-hidden":"true",viewBox:"0 0 1024 1024"},Vt=X("path",{d:"M129.3,428.6L52,512l345,372.5l575-620.8l-69.5-75L400.4,718.2L129.3,428.6z"},null,-1),Kt=[Vt];function Ut(e,n){return C(),J("svg",Nt,Kt)}const Xt=_e(Et,[["render",Ut]]),Yt={},Zt={class:"mx-right-arrow","aria-hidden":"true",viewBox:"0 0 1024 1024"},Gt=X("path",{d:"M307.018 49.445c11.517 0 23.032 4.394 31.819 13.18L756.404 480.18c8.439 8.438 13.181 19.885 13.181 31.82s-4.741 23.38-13.181 31.82L338.838 961.376c-17.574 17.573-46.065 17.573-63.64-0.001-17.573-17.573-17.573-46.065 0.001-63.64L660.944 512 275.198 126.265c-17.574-17.573-17.574-46.066-0.001-63.64C283.985 53.839 295.501 49.445 307.018 49.445z"},null,-1),Jt=[Gt];function Qt(e,n){return C(),J("svg",Zt,Jt)}const qt=_e(Yt,[["render",Qt]]),el={class:"mx-item-row"},tl=["xlink:href"],ll={key:1,class:"label"},nl={class:"mx-item-row"},ol={class:"mx-shortcut"},Be=ae({__name:"ContextMenuItem",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},customRender:{type:Function,default:null},customClass:{type:String,default:""},clickHandler:{type:Function,default:null},label:{type:[String,Object,Function],default:""},icon:{type:[String,Object,Function],default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},hasChildren:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},clickableWhenHasChildren:{type:Boolean,default:!1},rawMenuItem:{type:Object,default:void 0}},emits:["click","subMenuOpen","subMenuClose"],setup(e,{expose:n,emit:o}){const i=e,h=o,{clickHandler:t,clickClose:g,clickableWhenHasChildren:r,disabled:W,hidden:y,label:k,icon:B,iconFontClass:z,showRightArrow:w,shortcut:x,hasChildren:f}=fe(i),c=R(!1),v=R(!1),M=R(),H=V("globalOptions"),T=V("globalHasSlot"),F=V("globalRenderSlot"),d=V("globalCloseMenu"),m=V("menuContext"),P={getSubMenuInstance:()=>{},showSubMenu:()=>c.value?(m.markActiveMenuItem(P,!0),!0):f.value?(E(),!0):!1,hideSubMenu:()=>{m.closeOtherSubMenu()},isDisabledOrHidden:()=>W.value||y.value,getElement:()=>M.value,focus:()=>v.value=!0,blur:()=>v.value=!1,click:O};te("menuItemInstance",P),we(()=>{m.isMenuItemDataCollectedFlag()?Ce(()=>{let b=0;const $=m.getElement();if($){let U=0;for(let Q=0;Q<$.children.length;Q++){const S=$.children[Q];if(S.getAttribute("data-type")==="ContextMenuItem"){if(S===M.value){b=U;break}U++}}}m.addChildMenuItem(P,b)}):m.addChildMenuItem(P)}),Ie(()=>{m.removeChildMenuItem(P)});function O(b){if(!W.value){if(b){const $=b.target;if($.classList.contains("mx-context-no-clickable")||H.value.ignoreClickClassName&&$.classList.contains(H.value.ignoreClickClassName))return;if(H.value.clickCloseClassName&&$.classList.contains(H.value.clickCloseClassName)){b.stopPropagation(),d(i.rawMenuItem);return}}f.value?r.value?(typeof t.value=="function"&&t.value(b),h("click",b)):c.value||E():(typeof t.value=="function"&&t.value(b),h("click",b),g.value&&d(i.rawMenuItem))}}function E(b){v.value=!1,m.checkCloseOtherSubMenuTimeOut()||m.closeOtherSubMenu(),W.value||(m.markActiveMenuItem(P),f.value&&(b||m.markThisOpenedByKeyBoard(),m.addOpenedSubMenu(K),c.value=!0,Ce(()=>h("subMenuOpen",P))))}function K(){v.value=!1,c.value=!1,h("subMenuClose",P)}function A(){return{disabled:W.value,label:k.value,icon:B.value,iconFontClass:z.value,showRightArrow:w.value,clickClose:g.value,clickableWhenHasChildren:r.value,shortcut:x.value,theme:H.value.theme,isOpen:c,hasChildren:f,onClick:O,onMouseEnter:E,closeMenu:d}}return n(P),(b,$)=>l(y)?D("",!0):(C(),J("div",{key:0,class:"mx-context-menu-item-wrapper",ref_key:"menuItemRef",ref:M,"data-type":"ContextMenuItem"},[l(T)("itemRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemRender",A())},null,8,["vnode"])):e.customRender?(C(),j(l(ee),{key:1,vnode:e.customRender,data:A()},null,8,["vnode","data"])):(C(),J("div",{key:2,class:ie(["mx-context-menu-item",l(W)?"disabled":"",v.value?"keyboard-focus":"",e.customClass?" "+e.customClass:"",c.value?"open":""]),onClick:O,onMouseenter:E},[N(b.$slots,"default",{},()=>[X("div",el,[X("div",{class:ie(["mx-icon-placeholder",e.preserveIconWidth?"preserve-width":""])},[N(b.$slots,"icon",{},()=>[l(T)("itemIconRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemIconRender",A())},null,8,["vnode"])):typeof e.svgIcon=="string"&&e.svgIcon?(C(),J("svg",Me({key:1,class:"icon svg"},e.svgProps),[X("use",{"xlink:href":e.svgIcon},null,8,tl)],16)):typeof l(B)!="string"?(C(),j(l(ee),{key:2,vnode:l(B),data:l(B)},null,8,["vnode","data"])):typeof l(B)=="string"&&l(B)!==""?(C(),J("i",{key:3,class:ie(l(B)+" icon "+l(z)+" "+l(H).iconFontClass)},null,2)):D("",!0)]),e.checked?N(b.$slots,"check",{key:0},()=>[l(T)("itemCheckRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemCheckRender",A())},null,8,["vnode"])):D("",!0),Y(Xt)]):D("",!0)],2),N(b.$slots,"label",{},()=>[l(T)("itemLabelRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemLabelRender",A())},null,8,["vnode"])):typeof l(k)=="string"?(C(),J("span",ll,Oe(l(k)),1)):(C(),j(l(ee),{key:2,vnode:l(k),data:l(k)},null,8,["vnode","data"]))])]),X("div",nl,[l(x)||b.$slots.shortcut?N(b.$slots,"shortcut",{key:0},()=>[l(T)("itemShortcutRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemShortcutRender",A())},null,8,["vnode"])):D("",!0),X("span",ol,Oe(l(x)),1)]):D("",!0),l(w)?N(b.$slots,"rightArrow",{key:1},()=>[l(T)("itemRightArrowRender")?(C(),j(l(ee),{key:0,vnode:()=>l(F)("itemRightArrowRender",A())},null,8,["vnode"])):D("",!0),Y(qt)]):D("",!0)])])],34)),l(H).menuTransitionProps?(C(),j(at,nt(Me({key:3},l(H).menuTransitionProps)),{default:G(()=>[c.value?N(b.$slots,"submenu",{key:0,context:P}):D("",!0)]),_:3},16)):c.value?N(b.$slots,"submenu",{key:4,context:P}):D("",!0)],512))}}),al=ae({name:"ContextMenuSperator",components:{VNodeRender:ee},setup(){const e=V("globalHasSlot"),n=V("globalRenderSlot");return{globalHasSlot:e,globalRenderSlot:n}}}),sl={key:1,class:"mx-context-menu-item-sperator mx-context-no-clickable"};function ul(e,n,o,i,h,t){const g=le("VNodeRender");return e.globalHasSlot("separatorRender")?(C(),j(g,{key:0,vnode:()=>e.globalRenderSlot("separatorRender",{})},null,8,["vnode"])):(C(),J("div",sl))}const xe=_e(al,[["render",ul]]),Se=ae({__name:"ContextSubMenu",props:{items:{type:Object,default:null},maxHeight:{type:Number,default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0},adjustPosition:{type:Boolean,default:!0},direction:{type:String,default:"br"},parentMenuItemContext:{type:Object,default:null}},setup(e,{expose:n}){const o=e,i=R(!1),h=V("globalGetMenuHostId",""),t=V("menuContext"),g=V("globalOptions");V("globalHasSlot"),V("globalRenderSlot");const{zIndex:r,getParentWidth:W,getParentHeight:y,getZoom:k}=t,{adjustPosition:B}=fe(o),z=R(),w=R(),x=R(),f=[],c=V("globalSetCurrentSubMenu"),v=[];let M=null,H=0;function T(){M&&M.blur()}function F(s,p){if(s){for(let _=p!==void 0?p:0;_<v.length;_++)if(!v[_].isDisabledOrHidden()){d(_);break}}else for(let _=p!==void 0?p:v.length-1;_>=0;_--)if(!v[_].isDisabledOrHidden()){d(_);break}}function d(s){var p;if(M&&T(),s!==void 0&&(M=v[Math.max(0,Math.min(s,v.length-1))]),!M)return;M.focus();const _=M.getElement();_&&((p=z.value)==null||p.scrollTo(0,Math.min(Math.max(-$.value,-_.offsetTop-_.offsetHeight+U.value),0)))}function m(){c(P)}const P={isTopLevel:()=>t.getParentContext()===null,closeSelfAndActiveParent:()=>{const s=K.getParentContext();if(s){s.closeOtherSubMenu();const p=s.getSubMenuInstanceContext();if(p)return p.focusCurrentItem(),!0}return!1},closeCurrentSubMenu:()=>{var s;return(s=K.getParentContext())==null?void 0:s.closeOtherSubMenu()},moveCurrentItemFirst:()=>F(!0),moveCurrentItemLast:()=>F(!1),moveCurrentItemDown:()=>F(!0,M?v.indexOf(M)+1:0),moveCurrentItemUp:()=>F(!1,M?v.indexOf(M)-1:0),focusCurrentItem:()=>d(),openCurrentItemSubMenu:()=>M?M==null?void 0:M.showSubMenu():!1,triggerCurrentItemClick:s=>M==null?void 0:M.click(s)};let O=!1,E=!1;const K={zIndex:r+1,container:t.container,adjustPadding:g.value.adjustPadding||Z.defaultAdjustPadding,getParentWidth:()=>{var s;return((s=x.value)==null?void 0:s.offsetWidth)||0},getParentHeight:()=>{var s;return((s=x.value)==null?void 0:s.offsetHeight)||0},getPositon:()=>[S.value.x,S.value.y],getZoom:()=>g.value.zoom||Z.defaultZoom,addOpenedSubMenu(s){f.push(s)},closeOtherSubMenu(){f.forEach(s=>s()),f.splice(0,f.length),c(P)},checkCloseOtherSubMenuTimeOut(){return H?(clearTimeout(H),H=0,!0):!1},closeOtherSubMenuWithTimeOut(){H=setTimeout(()=>{H=0,this.closeOtherSubMenu()},200)},addChildMenuItem:(s,p)=>{p===void 0?v.push(s):v.splice(p,0,s)},removeChildMenuItem:s=>{v.splice(v.indexOf(s),1),s.getSubMenuInstance=()=>{}},markActiveMenuItem:(s,p=!1)=>{T(),M=s,p&&d()},markThisOpenedByKeyBoard:()=>{O=!0},isOpenedByKeyBoardFlag:()=>O?(O=!1,!0):!1,isMenuItemDataCollectedFlag:()=>E,getElement:()=>x.value||null,getParentContext:()=>t,getSubMenuInstanceContext:()=>P};te("menuContext",K);const A={getChildItem:s=>v[s],getMenuDimensions:()=>w.value?{width:w.value.offsetWidth,height:w.value.offsetHeight}:{width:0,height:0},getSubmenuRoot:()=>w.value,getMenu:()=>x.value,getScrollValue:()=>{var s,p;return((p=(s=z.value)==null?void 0:s.getScrollContainer())==null?void 0:p.scrollTop)||0},setScrollValue:s=>{var p;return(p=z.value)==null?void 0:p.scrollTo(0,s)},getScrollHeight:()=>$.value,adjustPosition:()=>{se()},getMaxHeight:()=>U.value,getPosition:()=>S.value,setPosition:(s,p)=>{S.value.x=s,S.value.y=p}},b=V("menuItemInstance",void 0);b&&(b.getSubMenuInstance=()=>A);const $=R(0),U=R(0),Q=R(!1),S=R({x:0,y:0});function se(){Ce(()=>{var _,q;const s=x.value,p=w.value;if(s&&p&&z.value){const{container:u}=t,ue=(_=W==null?void 0:W())!=null?_:0,a=(q=y==null?void 0:y())!=null?q:0,I=getComputedStyle(p),L=parseFloat(I.paddingLeft),re=parseFloat(I.paddingTop),ve=a>0?re:0,ce=document.documentElement.scrollHeight/k(),ct=document.documentElement.scrollWidth/k(),dt=Math.min(ct,u.offsetWidth),Te=Math.min(ce,u.offsetHeight);let We=ye(s,u),He=be(s,u);o.direction.includes("l")?S.value.x-=s.offsetWidth+L:o.direction.includes("r")?S.value.x+=ue+L:(S.value.x+=ue/2,S.value.x-=(s.offsetWidth+L)/2),o.direction.includes("t")?S.value.y-=(s.offsetHeight+re*2)/k():o.direction.includes("b")?S.value.y-=re/k():S.value.y-=(s.offsetHeight+re)/2/k(),Ce(()=>{var Le,$e;We=ye(s,u),He=be(s,u),$.value=Math.min(o.maxHeight||1e5,(($e=(Le=z.value)==null?void 0:Le.getScrollContainer())==null?void 0:$e.scrollHeight)||0);const ft=We+s.offsetWidth-dt,je=He+$.value+ve*2-Te;if(Q.value=je>0,B.value&&ft>0){const he=ue+s.offsetWidth-L,me=We;he>me?S.value.x-=me:S.value.x-=he}if(Q.value){if(B.value){const he=je,me=He;he>me?S.value.y-=me-ve:S.value.y-=he-ve}U.value=Te-(S.value.y+re)}else U.value=0})}s==null||s.focus({preventScroll:!0}),t.isOpenedByKeyBoardFlag()&&F(!0),E=!0})}return we(()=>{var s;i.value=!0;const p=(s=o.parentMenuItemContext)==null?void 0:s.getElement();if(p){const _=ye(p,t.container),q=be(p,t.container);S.value.x=_,S.value.y=q}else{const[_,q]=t.getPositon();S.value.x=_,S.value.y=q}c(P),se()}),Ie(()=>{i.value=!1,b&&(b.getSubMenuInstance=()=>{})}),n(A),(s,p)=>{var q;const _=le("ContextSubMenu",!0);return i.value?(C(),j(ot,{key:0,to:`#${l(h)}`},[X("div",Me({ref_key:"submenuRoot",ref:w},s.$attrs,{class:["mx-context-menu",l(g).customClass?l(g).customClass:"",(q=l(g).theme)!=null?q:""],style:{maxWidth:e.maxWidth?l(Xe)(e.maxWidth):`${l(Z).defaultMaxWidth}px`,minWidth:e.minWidth?l(Xe)(e.minWidth):`${l(Z).defaultMinWidth}px`,zIndex:l(r),left:`${S.value.x}px`,top:`${S.value.y}px`},"data-type":"ContextSubMenu",onClick:m}),[Y(l(Dt),{ref_key:"scrollRectRef",ref:z,scroll:"vertical",maxHeight:U.value,containerClass:"mx-context-menu-scroll"},{default:G(()=>[X("div",{class:ie(["mx-context-menu-items"]),ref_key:"menu",ref:x},[N(s.$slots,"default",{},()=>[(C(!0),J(ze,null,lt(e.items,(u,ue)=>(C(),J(ze,{key:ue},[u.hidden!==!0&&u.divided==="up"?(C(),j(xe,{key:0})):D("",!0),u.hidden!==!0&&u.divided==="self"?(C(),j(xe,{key:1})):(C(),j(Be,{key:2,clickHandler:u.onClick?a=>u.onClick(a):void 0,disabled:typeof u.disabled=="object"?u.disabled.value:u.disabled,hidden:typeof u.hidden=="object"?u.hidden.value:u.hidden,icon:u.icon,iconFontClass:u.iconFontClass,svgIcon:u.svgIcon,svgProps:u.svgProps,label:u.label,customRender:u.customRender,customClass:u.customClass,checked:typeof u.checked=="object"?u.checked.value:u.checked,shortcut:u.shortcut,clickClose:u.clickClose,clickableWhenHasChildren:u.clickableWhenHasChildren,preserveIconWidth:u.preserveIconWidth!==void 0?u.preserveIconWidth:l(g).preserveIconWidth,showRightArrow:u.children&&u.children.length>0,hasChildren:u.children&&u.children.length>0,rawMenuItem:u,onSubMenuOpen:a=>{var I;return(I=u.onSubMenuOpen)==null?void 0:I.call(u,a)},onSubMenuClose:a=>{var I;return(I=u.onSubMenuClose)==null?void 0:I.call(u,a)}},tt({_:2},[u.children&&u.children.length>0?{name:"submenu",fn:G(({context:a})=>[Y(_,{parentMenuItemContext:a,items:u.children,maxWidth:u.maxWidth,minWidth:u.minWidth,maxHeight:u.maxHeight,adjustPosition:u.adjustSubMenuPosition!==void 0?u.adjustSubMenuPosition:l(g).adjustPosition,direction:u.direction!==void 0?u.direction:l(g).direction},null,8,["parentMenuItemContext","items","maxWidth","minWidth","maxHeight","adjustPosition","direction"])]),key:"0"}:void 0]),1032,["clickHandler","disabled","hidden","icon","iconFontClass","svgIcon","svgProps","label","customRender","customClass","checked","shortcut","clickClose","clickableWhenHasChildren","preserveIconWidth","showRightArrow","hasChildren","rawMenuItem","onSubMenuOpen","onSubMenuClose"])),u.hidden!==!0&&(u.divided==="down"||u.divided===!0)?(C(),j(xe,{key:3})):D("",!0)],64))),128))])],512)]),_:3},8,["maxHeight"])],16)],8,["to"])):D("",!0)}}}),it=ae({__name:"ContextSubMenuWrapper",props:{options:{type:Object,default:null},show:{type:Boolean,default:null},container:{type:Object,default:null},isFullScreenContainer:{type:Boolean,default:!0}},emits:["close","closeAnimFinished"],setup(e,{expose:n,emit:o}){const i=e,h=o,t=et(),g=R(),{options:r,show:W,container:y}=fe(i);we(()=>{W.value&&z()}),Ie(()=>{c()}),st(W,d=>{d?z():(Ue(k),c())});const k={closeMenu:w,isClosed:x,getMenuRef:()=>g.value,getMenuDimensions:()=>{var m;var d;return(m=(d=g.value)==null?void 0:d.getMenuDimensions())!=null?m:{width:0,height:0}}};let B=!1;function z(){f(),Ot(k)}function w(d){B=!0,h("close",d),r.value.menuTransitionProps||h("closeAnimFinished"),Ue(k)}function x(){return B}function f(){setTimeout(()=>{document.addEventListener("click",T,!0),document.addEventListener("contextmenu",T,!0),document.addEventListener("scroll",H,!0),!i.isFullScreenContainer&&y.value&&y.value.addEventListener("scroll",H,!0),r.value.keyboardControl!==!1&&document.addEventListener("keydown",M,!0)},50)}function c(){document.removeEventListener("contextmenu",T,!0),document.removeEventListener("click",T,!0),document.removeEventListener("scroll",H,!0),!i.isFullScreenContainer&&y.value&&y.value.removeEventListener("scroll",H,!0),r.value.keyboardControl!==!1&&document.removeEventListener("keydown",M,!0)}const v=R();te("globalSetCurrentSubMenu",d=>v.value=d),te("globalGetMenuHostId",y.value.id);function M(d){var m,P,O,E,K,A,b,$,U,Q,S,se,s;let p=!0;switch(d.key){case"Escape":{((m=v.value)==null?void 0:m.isTopLevel())===!1?(P=v.value)==null||P.closeCurrentSubMenu():w();break}case"ArrowDown":(O=v.value)==null||O.moveCurrentItemDown();break;case"ArrowUp":(E=v.value)==null||E.moveCurrentItemUp();break;case"Home":(K=v.value)==null||K.moveCurrentItemFirst();break;case"End":(A=v.value)==null||A.moveCurrentItemLast();break;case"ArrowLeft":{(b=v.value)!=null&&b.closeSelfAndActiveParent()||(U=($=r.value).onKeyFocusMoveLeft)==null||U.call($);break}case"ArrowRight":(Q=v.value)!=null&&Q.openCurrentItemSubMenu()||(se=(S=r.value).onKeyFocusMoveRight)==null||se.call(S);break;case"Enter":(s=v.value)==null||s.triggerCurrentItemClick(d);break;default:p=!1;break}p&&v.value&&(d.stopPropagation(),d.preventDefault())}function H(d){r.value.closeWhenScroll!==!1&&F(d.target,null)}function T(d){F(d.target,d)}function F(d,m){for(var P,O;d;){if(d.classList&&d.classList.contains("mx-context-menu"))return;d=d.parentNode}m?r.value.clickCloseOnOutside!==!1?(c(),w()):(O=(P=r.value).onClickOnOutside)==null||O.call(P,m):(c(),w())}return te("globalOptions",r),te("globalCloseMenu",w),te("globalIsFullScreenContainer",i.isFullScreenContainer),te("globalHasSlot",d=>t[d]!==void 0),te("globalRenderSlot",(d,m)=>N(t,d,ne({},m),()=>[de("span","Render slot failed")],!1)),te("menuContext",{zIndex:r.value.zIndex||Z.defaultZindex,container:y.value,adjustPadding:{x:0,y:0},getZoom:()=>r.value.zoom||Z.defaultZoom,getParentWidth:()=>0,getParentHeight:()=>0,getPositon:()=>[r.value.x,r.value.y],closeOtherSubMenuWithTimeOut:()=>{},checkCloseOtherSubMenuTimeOut:()=>!1,addOpenedSubMenu:()=>{},closeOtherSubMenu:()=>{},getParentContext:()=>null,getSubMenuInstanceContext:()=>null,getElement:()=>null,addChildMenuItem:()=>{},removeChildMenuItem:()=>{},markActiveMenuItem:()=>{},markThisOpenedByKeyBoard:()=>{},isOpenedByKeyBoardFlag:()=>!1,isMenuItemDataCollectedFlag:()=>!1}),n(k),(d,m)=>l(r).menuTransitionProps?(C(),j(at,Me({key:0,appear:""},l(r).menuTransitionProps,{onAfterLeave:m[0]||(m[0]=P=>h("closeAnimFinished"))}),{default:G(()=>[l(W)?(C(),j(Se,{key:0,ref_key:"submenuInstance",ref:g,items:l(r).items,adjustPosition:l(r).adjustPosition,maxWidth:l(r).maxWidth||l(Z).defaultMaxWidth,minWidth:l(r).minWidth||l(Z).defaultMinWidth,maxHeight:l(r).maxHeight,direction:l(r).direction||l(Z).defaultDirection},{default:G(()=>[N(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):D("",!0)]),_:3},16)):l(W)?(C(),j(Se,{key:1,ref_key:"submenuInstance",ref:g,items:l(r).items,adjustPosition:l(r).adjustPosition,maxWidth:l(r).maxWidth||l(Z).defaultMaxWidth,minWidth:l(r).minWidth||l(Z).defaultMinWidth,maxHeight:l(r).maxHeight,direction:l(r).direction||l(Z).defaultDirection},{default:G(()=>[N(d.$slots,"default")]),_:3},8,["items","adjustPosition","maxWidth","minWidth","maxHeight","direction"])):D("",!0)}}),rl=ae({__name:"ContextMenu",props:{options:{type:Object,default:null},show:{type:Boolean,default:!1}},emits:["update:show","close"],setup(e,{expose:n,emit:o}){const i=o,h=e,{options:t,show:g}=fe(h),{isNew:r,container:W,eleId:y}=rt(t.value),k=R(null),B=et();function z(w){var x,f;i("update:show",!1),i("close"),(f=(x=t.value).onClose)==null||f.call(x,w)}return n({closeMenu:()=>i("update:show",!1),isClosed:()=>!g.value,getMenuRef:()=>{var w;return(w=k.value)==null?void 0:w.getMenuRef()},getMenuDimensions:()=>{var x;var w;return(x=(w=k.value)==null?void 0:w.getMenuDimensions())!=null?x:{width:0,height:0}}}),(w,x)=>(C(),j(ot,{to:`#${l(y)}`},[Y(it,{ref_key:"menuRef",ref:k,options:l(t),show:l(g),container:l(W),isFullScreenContainer:!l(r),onClose:z},tt({_:2},[lt(l(B),(f,c)=>({name:c,fn:G(v=>[N(w.$slots,c,nt(bt(v)))])}))]),1032,["options","show","container","isFullScreenContainer"])],8,["to"]))}}),il=ae({name:"ContextMenuGroup",props:{disabled:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},clickHandler:{type:Function,default:null},label:{type:String,default:""},icon:{type:String,default:""},iconFontClass:{type:String,default:"iconfont"},checked:{type:Boolean,default:!1},shortcut:{type:String,default:""},svgIcon:{type:String,default:""},svgProps:{type:Object,default:null},preserveIconWidth:{type:Boolean,default:!0},showRightArrow:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},adjustSubMenuPosition:{type:Boolean,default:void 0},maxHeight:{type:[String,Number],default:0},maxWidth:{type:[String,Number],default:0},minWidth:{type:[String,Number],default:0}},setup(e,n){const o=V("globalOptions"),{adjustSubMenuPosition:i,maxWidth:h,minWidth:t,maxHeight:g}=fe(e),r=typeof i.value<"u"?i.value:o.value.adjustPosition,W=R(),y=R();return n.expose({getSubMenuRef:()=>W.value,getMenuItemRef:()=>y.value}),()=>de(Be,ke(ne({},e),{ref:y,showRightArrow:!0,maxWidth:void 0,minWidth:void 0,maxHeight:void 0,adjustSubMenuPosition:void 0,hasChildren:typeof n.slots.default!==void 0}),n.slots.default?ne({submenu:k=>de(Se,{ref:W,maxWidth:h.value,minWidth:t.value,maxHeight:g.value,adjustPosition:r,parentMenuItemContext:k.context},{default:n.slots.default})},Lt(n.slots,"default")):n.slots)}});function cl(e,n,o,i){const h=R(!0),t=de(it,{options:e,show:h.value,container:n,isFullScreenContainer:!o,onCloseAnimFinished:()=>{De(null,n)},onClose:g=>{var r;(r=e.onClose)==null||r.call(e,g),h.value=!1}},i);return De(t,n),t.component}function qe(e,n){const o=rt(e);return cl(e,o.container,o.isNew,n).exposed}const dl={install(e){e.config.globalProperties.$contextmenu=qe,e.component("ContextMenu",rl),e.component("ContextMenuItem",Be),e.component("ContextMenuGroup",il),e.component("ContextMenuSperator",xe),e.component("ContextMenuSeparator",xe),e.component("ContextSubMenu",Se)},showContextMenu(e,n){return qe(e,n)},isAnyContextMenuOpen(){return Rt()},closeContextMenu:ut,transformMenuPosition:_t},fl={class:"h-full bg-bg_color overflow-hidden relative",style:{minHeight:"calc(100vh - 141px)"}},vl={class:"flex items-center h-[34px]"},hl={__name:"tree",emits:["tree-select"],setup(e,{emit:n}){const o=n,i=R(),h=R(""),t=R({}),g={children:"children",label:"name"},{isDark:r}=xt(),{treeLoading:W,treeData:y,openDictDialog:k,getDictTreeData:B}=wt(),z=(f,c)=>f?`${c.name}（${c.code}）`.includes(f):!0;function w(f){var v,M;const c=f.$treeNodeId;t.value[c]=(v=t.value[c])!=null&&v.highlight?Object.assign({id:c},t.value[c],{highlight:!1}):Object.assign({id:c},t.value[c],{highlight:!0}),Object.values(t.value).forEach(H=>{H.id!==c&&(H.highlight=!1)}),o("tree-select",(M=t.value[c])!=null&&M.highlight?Object.assign(ke(ne({},f),{selected:!0})):Object.assign(ke(ne({},f),{selected:!1})))}function x(f,{name:c,data:v}){f.preventDefault(),dl.showContextMenu({x:f.x,y:f.y,theme:r.value?"dark":"default",items:[{label:"修改",icon:de(Pe(Ht)),onClick:()=>{k("修改",v)}},{label:"删除",icon:de(Pe(Pt)),onClick:()=>{Mt.confirm(`确定要删除 <strong style='color:var(--el-color-primary)'>${c}</strong> 字典吗?`,"系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0,draggable:!0}).then(()=>{B(),St("已成功删除",{type:"success"})})}}]})}return st(h,f=>{i.value.filter(f)}),(f,c)=>{const v=le("IconifyIconOffline"),M=le("el-icon"),H=le("el-input"),T=le("el-divider"),F=le("el-tree"),d=le("el-scrollbar"),m=le("el-button"),P=Ct("loading");return Ve((C(),J("div",fl,[X("div",vl,[Y(H,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=O=>h.value=O),class:"mx-2",size:"small",placeholder:"请输入字典名称",clearable:""},{suffix:G(()=>[Y(M,{class:"el-input__icon"},{default:G(()=>[Ve(Y(v,{icon:"ri/search-line"},null,512),[[kt,h.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),Y(T),Y(d,{height:"calc(90vh - 150px)"},{default:G(()=>[Y(F,{ref_key:"treeRef",ref:i,data:l(y),"node-key":"id",size:"small",props:g,"default-expand-all":"","expand-on-click-node":!1,"filter-node-method":z,onNodeClick:w},{default:G(({node:O,data:E})=>{var K,A,b;return[Y(l(It),{class:ie(["w-full!","p-1!","mt-2!","mr-2!","rounded","select-none","hover:text-primary",h.value.trim().length>0&&`${O.label}（${E.code}）`.includes(h.value)&&"text-red-500!",(K=t.value[O.id])!=null&&K.highlight?"dark:text-primary!":""]),style:pe({color:(A=t.value[O.id])!=null&&A.highlight?"var(--el-color-primary)":"",background:(b=t.value[O.id])!=null&&b.highlight?"var(--el-color-primary-light-7)":"transparent"}),onContextmenu:$=>x($,{name:O.label,data:E})},{default:G(()=>[Ke(Oe(`${O.label}（${E.code}）`),1)]),_:2},1032,["class","style","onContextmenu"])]}),_:1},8,["data"])]),_:1}),Y(m,{class:"w-[90%] absolute bottom-[22px] left-[50%] -translate-x-[50%]",type:"primary",icon:l(Pe)(l(Wt)),onClick:c[1]||(c[1]=O=>l(k)())},{default:G(()=>c[2]||(c[2]=[Ke(" 新增字典 ")])),_:1,__:[2]},8,["icon"])])),[[P,l(W)]])}}},wl=yt(hl,[["__scopeId","data-v-53ed4740"]]);export{wl as default};
