import{_ as I,a6 as R,p as k,u as s,M as x,y as S,i as T,w as b,o as L,c as P,d as j,q as c,a1 as y}from"./index-hfoYY8E3.js";const B=["element-loading-text"],D=["src"],E=Object.assign({name:"LayFrame"},{__name:"frame",props:{frameInfo:Object},setup(h){var v,_;const t=h,{t:p}=R(),r=c(!0),n=k(),f=c(""),m=c(null),o=c(null);(v=s(n.meta))!=null&&v.frameSrc&&(f.value=(_=s(n.meta))==null?void 0:_.frameSrc);function d(){o.value!==null&&(clearTimeout(o.value),o.value=null)}function i(){r.value=!1,d()}function w(){y(()=>{const e=s(m);if(!e)return;const a=e;a.attachEvent?a.attachEvent("onload",i):e.onload=i})}let u=!1;return x(()=>n.fullPath,e=>{var a,l;if(n.name==="Redirect"&&((a=t.frameInfo)!=null&&a.fullPath)&&e.includes(t.frameInfo.fullPath)){u=!0,r.value=!0;return}if(((l=t.frameInfo)==null?void 0:l.fullPath)===e&&u){r.value=!0,d();const g=new URL(t.frameInfo.frameSrc,window.location.origin).search?"&":"?";f.value=`${t.frameInfo.frameSrc}${g}t=${Date.now()}`,o.value=window.setTimeout(()=>{r.value&&i()},1500),u=!1}},{immediate:!0}),S(()=>{w()}),(e,a)=>{const l=T("loading");return b((L(),P("div",{class:"frame","element-loading-text":s(p)("status.pureLoad")},[j("iframe",{ref_key:"frameRef",ref:m,src:f.value,class:"frame-iframe"},null,8,D)],8,B)),[[l,r.value]])}}}),M=I(E,[["__scopeId","data-v-396e1d73"]]);export{M as default};
